patrolstations = {
	{-1603.2197265625,-2712.736328125,48.9453125},
	{2465.748046875,-2215.55859375,13.546875},
	{2473.439453125,-2215.56640625,13.546875},
	{2480.0732421875,-2216.140625,13.546875},
	{2487.24609375,-2215.5966796875,13.546875},
	{2494.1005859375,-2215.5859375,13.546875},
	{-1686.6728515625,408.9970703125,7.3984375},
	{-1682.34375,412.9384765625,7.3984375},
	{-1680.0263671875,402.3642578125,7.3984375},
	{-1675.84375,406.4677734375,7.3984375},
	{-1670.5615234375,411.8359375,7.3984375},
	{-1666.2392578125,416.2509765625,7.3984375},
	{-1672.7939453125,422.81640625,7.3984375},
	{-1677.20703125,418.46484375,7.3984375},
	{-2410.7021484375,969.9091796875,45.4609375},
	{-2410.744140625,975.220703125,45.4609375},
	{-2410.837890625,980.5302734375,45.4609375},
	{-1329.3046875,2668.5126953125,50.46875},
	{-1328.7314453125,2673.90625,50.0625},
	{-1327.0185546875,2679.3876953125,50.46875},
	{-1327.3798828125,2684.62890625,50.0625},
	{1940.7099609375,-1778.5244140625,13.390598297119},
	{1940.6552734375,-1774.908203125,13.390598297119},
	{1940.630859375,-1771.728515625,13.390598297119},
	{1940.7080078125,-1767.3837890625,13.390598297119},
	{-1477.921875,1868.138671875,32.639846801758},
	{-1466.1552734375,1869.0048828125,32.6328125},
	{-1464.5224609375,1861.3828125,32.639846801758},
	{-1477.4599609375,1860.5205078125,32.6328125},
	{-735.9208984375,2744.0087890625,47.2265625},
	{-739.0439453125,2744.2421875,47.165451049805},
	{377.6953125,2601.1083984375,16.484375},
	{624.5263671875,1676.25390625,6.9921875},
	{620.2958984375,1681.2431640625,6.9921875},
	{616.248046875,1686.4169921875,7.1875},
	{612.783203125,1691.1650390625,7.1875},
	{609.2060546875,1696.201171875,7.1875},
	{605.8505859375,1700.978515625,7.1875},
	{602.27734375,1706.3603515625,7.1875},
	{2141.037109375,2742.734375,10.960174560547},
	{2142.3115234375,2752.6982421875,10.96019744873},
	{2147.9521484375,2752.3203125,10.8203125},
	{2152.60546875,2751.953125,10.8203125},
	{2152.984375,2743.85546875,10.8203125},
	{2147.75,2743.7392578125,10.8203125},
	{-97.6298828125,-1175.0283203125,2.4990689754486},
	{-90.74609375,-1177.853515625,2.2021217346191},
	{-84.75390625,-1163.853515625,2.3359375},
	{-91.5771484375,-1160.5732421875,2.4453125},
	{-1606.525390625,-2717.2138671875,48.9453125},
	{-1609.7109375,-2721.544921875,48.9453125},
	{-1599.83203125,-2708.302734375,48.9453125},
	{-2246.314453125,-2558.8212890625,32.0703125},
	{-2241.3125,-2561.3662109375,32.0703125},
	{-1132.2880859375,-135.0986328125,14.14396572113},
	{-1153.529296875,-156.373046875,14.1484375},
	{-1142.826171875,-145.67578125,14.14396572113},
	{655.611328125,-557.9912109375,16.501491546631},
	{655.6572265625,-572.1728515625,16.501491546631},
	{1601.791015625,2203.90625,11.060997009277},
	{1596.806640625,2203.4345703125,10.8203125},
	{1590.197265625,2203.4853515625,10.8203125},
	{1589.4775390625,2195.43359375,10.8203125},
	{1596.125,2194.294921875,10.8203125},
	{1601.6591796875,2194.3369140625,10.8203125},
	{2206.8466796875,2470.47265625,10.8203125},
	{2206.94140625,2474.75,10.8203125},
	{2206.9267578125,2478.86328125,10.8203125},
	{2198.06640625,2480.6953125,10.8203125},
	{2197.541015625,2475.791015625,10.995170593262},
	{2197.609375,2471.9169921875,10.995170593262},
	{2120.8251953125,915.4833984375,10.8203125},
	{2115.1181640625,915.44140625,10.8203125},
	{2109.076171875,915.4228515625,10.8203125},
	{2109.22265625,924.8779296875,10.9609375},
	{2114.9404296875,924.8857421875,10.9609375},
	{2119.5126953125,925.2861328125,10.9609375},
	{2645.7197265625,1112.7802734375,10.8203125},
	{2639.984375,1112.56640625,10.8203125},
	{2634.828125,1112.3466796875,10.9609375},
	{2634.1826171875,1101.9482421875,10.8203125},
	{2636.7509765625,1101.6748046875,10.8203125},
	{2643.5126953125,1101.81640625,10.8203125},
	{2209.576171875,2469.8251953125,10.8203125},
	{2208.8310546875,2475.09375,10.8203125},
	{1005.078125,-901.7490234375,42.216625213623},
	{993.025390625,-902.474609375,42.222496032715},
}

local customLootTable = {}

function createVehicleCrashLoot(x, y, z)
	local veh = createObject(2277, x, y, z)
	local col = createColSphere(x, y, z, 3.2)
	setElementData(col, "vehiclecrash", true)
	setElementData(col, "MAX_Slots", 250)
	
	setElementData(col, "parent", veh)
	setElementData(veh, "parent", col)
	attachElements(col, veh, 0, 0, 0)
	
	for _, value in ipairs(lootpileType["vehiclecrashside"]) do
		local itemPlus = math.percentChance(tonumber(value[5]),math.random(2,5))
		setElementData(col, value[1], itemPlus)
	end
	
	table.insert(customLootTable, {veh, col})
end

function createHeliCrashLoot(x, y, z)
	local veh = createObject(2572, x, y, z)
	local col = createColSphere(x, y, z, 3.7)
	setElementData(col, "helicrashside", true)
	setElementData(col, "MAX_Slots", 250)
	
	setElementData(col, "parent", veh)
	setElementData(veh, "parent", col)
	attachElements(col, veh, 0, 0, 0)
	
	for _, value in ipairs(lootpileType["helicrashside"]) do
		local itemPlus = math.percentChance(tonumber(value[5]),math.random(2,5))
		setElementData(col, value[1], itemPlus)
	end
	
	table.insert(customLootTable, {veh, col})
end

function createMedicalLoot(x, y, z, rot)
	local box = createObject(1871, x, y, z, 0, 0, rot)
	local col = createColSphere(x, y, z, 1.6)
	setElementData(col, "medicalbox", true)
	setElementData(col, "MAX_Slots", 10)
	
	setElementData(col, "parent", box)
	setElementData(box, "parent", col)
	attachElements(col, box, 0, 0, 0)
	
	for _, value in ipairs(lootpileType["medical"]) do
		local itemPlus = math.percentChance(tonumber(value[5]),math.random(2,5))
		setElementData(col, value[1], itemPlus)
	end
	
	table.insert(customLootTable, {box, col})
end

function createPatrolStationLoot(x, y, z)
	local col = createColSphere(x, y, z, 1.2)
	setElementData(col, "patrolstation", true)
	setElementData(col, "isfull", true)
	table.insert(customLootTable, {nil, col})
end

function restorePatrolStation()
	for _, v in ipairs(customLootTable) do
		if getElementData(v[2], "patrolstation") then
			local x, y, z = getElementPosition(v[2])
			setElementData(v[2], "isfull", true)
		end
	end
	
	setTimer(restorePatrolStation, 900000, 1)
end
setTimer(restorePatrolStation, 3000, 1)

function createBriefcaseLoot(x, y, z, rot)
	local object = createObject(1923, x, y, z, 0, 0, rot)
	local col = createColSphere(x, y, z, 2)
	setElementData(object, "parent", col)
	setElementData(col, "parent", object)
	setElementData(col, "briefcase", true)
	setElementData(col, "MAX_Slots", 70)

	for _, value in ipairs(lootpileType["briefcases"]) do
		local itemPlus = math.percentChance(tonumber(value[5]),math.random(2,5))
		setElementData(col, value[1], itemPlus)
	end
	
	table.insert(customLootTable, {object, col})
end

function resetCustomLoot()
	for _, v in ipairs(customLootTable) do
		local x, y, z = getElementPosition(v[2])

		if getElementData(v[2], "patrolstation") then
			setElementData(v[2], "isfull", true)
		elseif getElementData(v[2], "medicalbox") then
			for _, value in ipairs(lootpileType["medical"]) do
				setItem(v[2], value)
			end
		elseif getElementData(v[2], "vehiclecrash") then
			for _, value in ipairs(lootpileType["vehiclecrashside"]) do
				setItem(v[2], value)
			end
		elseif getElementData(v[2], "helicrashside") then
			for _, value in ipairs(lootpileType["helicrashside"]) do
				setItem(v[2], value)
			end
		elseif getElementData(v[2], "briefcase") then
			for _, value in ipairs(lootpileType["briefcases"]) do
				setItem(v[2], value)
			end
		end
	end
end
addEvent("onServerItemlootRefresh", true)
addEventHandler("onServerItemlootRefresh", root, resetCustomLoot)

function setItem(col, value)
	local itemPlus = math.percentChance(tonumber(value[5]),math.random(2,5))
	
	if value[1] == "12 Gauge" then
		itemPlus = 12 * math.random(1,3)
	elseif value[1] == "5.45x39mm" then
		itemPlus = 39 * math.random(1,3)
	elseif value[1] == "5.56x45mm" then
		itemPlus = 45 * math.random(1,3)
	elseif value[1] == "7.62x51mm" then
		itemPlus = 100 * math.random(1,3)
	elseif value[1] == "7.62x54mm" then
		itemPlus = 54 * math.random(1,3)
	elseif value[1] == "11.43x23mm" then
		itemPlus = 23 * math.random(1,3)
	elseif value[1] == "1866 Slug" then
		itemPlus = 10 * math.random(1,3)
	elseif value[1] == "9x18mm" then
		itemPlus = 18 * math.random(1,3)
	elseif value[1] == "9x19mm" then
		itemPlus = 19 * math.random(1,3)
	elseif value[1] == ".308 Winchester" then
		itemPlus = 14 * math.random(1,3)
	end
	
	setElementData(col, value[1], itemPlus)
end

function loadCustomLoot()
	for index, val in ipairs(pickupPositions["Vehiclecrashsides"]) do
		createVehicleCrashLoot(val[1], val[2], val[3])
	end
	for index, val in ipairs(pickupPositions["Helicrashsides"]) do
		createHeliCrashLoot(val[1], val[2], val[3])
	end	
	for index, val in ipairs(pickupPositions["Medicalbox"]) do
		createMedicalLoot(val[1], val[2], val[3], val[4])
	end
	for index, val in ipairs(pickupPositions["Briefcase"]) do
		createBriefcaseLoot(val[1], val[2], val[3], val[4])
	end	
	for index, val in ipairs(patrolstations) do
		createPatrolStationLoot(val[1], val[2], val[3])
	end
end
setTimer(loadCustomLoot, 3000, 1)